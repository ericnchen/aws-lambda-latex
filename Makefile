default: help

# Always run these rules.
#.PHONY: build package localtest localtest-quick clean


# Display make information when no commands are given.
help:
	@echo "Usage: make [options] target"
	@echo ""
	@echo "Targets"
	@echo "    layer        Build and package lambdalatex-layer.zip."
	@echo "    clean        Remove all files generated by this makefile."
	@echo ""
	@echo "Options"
	@echo "    -B           Force rule to always execute."


# Build the lambdalatex Docker image with out layer artifacts.
layer:
	$(MAKE) -C lambdalatex-layer build
	$(MAKE) -C lambdalatex-layer package


test-layer:
	rm -rf output
	python localtest.py -i examples/article -o output/docker --compile-with docker
	python localtest.py -i examples/article -o output/native --compile-with native

# Remove all built artifacts.
clean:
	$(MAKE) -C lambdalatex-layer clean
