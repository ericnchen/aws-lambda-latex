default: help

# Always run these rules.
.PHONY: basic mmd6-article mmd6-beamer


# Display make information when no commands are given.
help:
	@echo "Usage: make [options] target"
	@echo ""
	@echo "Makefile to help build zipped archives for tests with latexmk."
	@echo ""
	@echo "Targets"
	@echo "    basic           Create a basic LaTeX document."
	@echo "    mmd6-article    Create a LaTeX document with mmd6-article includes."
	@echo "    mmd6-beamer     Create a LaTeX document with mmd6-beamer includes."
	@echo "    clean           Remove all files generated by this makefile."
	@echo ""
	@echo "Options"
	@echo "    -B           Force rule to always execute."


basic: test-input-basic.zip
mmd6-article: test-input-mmd6-article.zip
mmd6-beamer: test-input-mmd6-beamer.zip


test-input-basic.zip: gull.png main-basic.tex
	rm -f test-input-basic.zip
	cp main-basic.tex main.tex
	zip test-input-basic.zip gull.png main.tex
	rm -f main.tex

test-input-mmd6-article.zip: gull.png main-mmd6-article.tex
	rm -f test-input-mmd6-article.zip
	cp main-mmd6-article.tex main.tex
	zip test-input-mmd6-article.zip gull.png main.tex
	rm -f main.tex

test-input-mmd6-beamer.zip: gull.png main-mmd6-beamer.tex
	rm -f test-input-mmd6-beamer.zip
	cp main-mmd6-beamer.tex main.tex
	zip test-input-mmd6-beamer.zip gull.png main.tex
	rm -f main.tex

# Remove all built artifacts.
clean:
	rm -f main.tex
	rm -f test-input-basic.zip
	rm -f test-input-mmd6-article.zip
	rm -f test-input-mmd6-beamer.zip
